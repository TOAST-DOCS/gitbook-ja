## Database > RDS for MySQL > DBエンジン

## DBエンジン
MySQLの場合、バージョン番号はバージョン= X.Y.Zで構成されます。NHN Cloud RDS用語でX.Yはメジャーバージョンを、Zはマイナーバージョン番号を表します。


### RDSが提供するDBエンジンのバージョン

以下に記載されたバージョンを使用できます。

| バージョン        | 備考                                                     |
|--------------|-----------------------------------------------------------|
| <strong>8.0</strong> ||
| MySQL 8.0.34 |                                                           | 
| MySQL 8.0.33 |                                                           |
| MySQL 8.0.32 |                                                           | 
| MySQL 8.0.28 |                                                           | 
| MySQL 8.0.23 |                                                           |
| MySQL 8.0.18 |                                                           |
| <strong>5.7</strong> ||
| MySQL 5.7.37 |                                                           |
| MySQL 5.7.33 | 外部のバックアップでDBインスタンスを復元できません。                   |
| MySQL 5.7.26 |                                                           |
| MySQL 5.7.19 |                                                           |
| MySQL 5.7.15 |                                                           |
| <strong>5.6</strong> ||
| MySQL 5.6.33 | 新規DBインスタンスを作成できません。既存DBインスタンスのリードレプリカ作成、復元のみサポートします。 |

MySQLでバージョン番号はバージョン= `X.Y.Z`で構成されます。NHN CloudのRDS for MySQLでは、`X.Y`の場合はメジャーバージョンを、`Z`はマイナーバージョンを表します。

### DBエンジンバージョン管理
DBインスタンスの作成後、DBインスタンスの修正と一緒にDBエンジンのバージョンを変更できます。

> [注意]
> DBバージョン変更しようとする場合、アップグレードのみサポートし、ダウングレードはサポートしません。

DBエンジンのバージョンアップグレードが行われる場合、メジャーバージョン番号のみ変更される場合はメジャーバージョンアップグレード、マイナーバージョン番号のみ変更される場合はマイナーバージョンアップグレードとみなします。
DBエンジンのメジャーバージョンのアップグレードを試みる場合は、次のメジャーバージョンのDBエンジンのバージョンに対してアップグレードが可能です。

#### MySQL 5.7からMySQL 8.0へのアップグレードのための事前点検

MySQL 8.0とMySQL 5.7は相当数の非互換性要素が含まれています。したがって、`5.7`から`8.0`バージョンにメジャーバージョンDBエンジンのアップグレードを行う場合、問題が発生する可能性があります。このため、問題発生が予想される一部の項目に対する事前点検が必要です。以下は事前点検が必要な項目です。

- `mysqlcheck`を通じてバージョンアップグレードの欠格事項がないこと。
- `INFORMATION_SCHEMA.VIEWS`で確認した時、カラム名が64文字を超える内容がないこと。
- データ辞書で使用されるテーブルと同じ名称のテーブルがないこと。
- 長さが255文字または1020バイトを超える個別のENUM、SET列要素があるテーブル、ストアドプロシージャがないこと。
- 外部キー制約の名前が64文字を超えるテーブルがないこと。
- lower_case_table_names`の設定を1に変更する場合は、スキーマ名が小文字であることを確認してください。
- lower_case_table_names`の設定を1に変更する場合、テーブル名が小文字であることを確認します。
- 特定のパーティションチェックで抽出されるパーティションテーブルがないこと。
- InnoDBシステムテーブルスペースと一般テーブルスペースを含む共有テーブルスペースに常駐するテーブルパーティションがないこと。

DBバージョンアップグレードの事前点検については、次の方法で結果の確認が可能です。
- `5.7から8.0にアップグレードするためのチェックリストの詳細`(https://static.toastoven.net/prod_rds/23.08.17/Check_5.7_to_8.0_ja.xlsx)を活用して直接確認
- コンソールでDBバージョンをアップグレードする場合は、`DBエンジンアップグレード事前確認`ボタンを利用して結果を確認
- DBバージョンアップグレードの試行による結果の確認

コンソールで`DBエンジンアップグレード事前確認`による結果および、DBバージョンアップグレードの試行による結果は、個別DBインスタンスのログタブに作成された`db_version_upgrade_compatibility.log`を通じて詳細を確認できます。詳細項目はそれぞれ次の意味を持ちます。
- `CHECK_BY_MYSQL_CHECK`: `mysqlcheck`を通じたバージョンアップグレードの欠格事項がないこと。
- `COLUMN_LENGHT_LIMIT_CHECK`: `INFORMATION_SCHEMA.VIEWS`で確認した時、カラム名が64文字を超える内容がないこと。
- `DUPLICATE_NAME_WITH_DATA_DICT` :データ辞書で使用されるテーブルと同じ名称のテーブルがないこと。
- `ENUM_SET_SIZE_CHECK` :長さが255文字または1020バイトを超える個々のENUM、SET列要素があるテーブル、保存プロシージャがないこと。
- `FOREIGN_KEY_LENGTH_LIMIT_CHECK` :外部キー制約条件名が64文字を超えるテーブルがないこと。
- `LOWER_CASE_SCHEMAS_NAMES_CHECK`: `lower_case_table_names`設定を1に変更する場合、スキーマ名が小文字であることを確認する。
- `LOWER_CASE_TABLE_NAMES_CHECK`: `lower_case_table_names`設定を1に変更する場合、テーブル名が小文字であることを確認する。
- `PARTITION_TABLE_CHECK` :特定のパーティションチェックで抽出されるパーティションテーブルがないこと。
- `PROPERTY_LENGTH_LIMIT_CHECK`: InnoDBシステムテーブルスペースと一般テーブルスペースを含む共有テーブルスペースに常駐するテーブルパーティションがないこと。

また、5.7では使用されたが、8.0では削除または変更された事項について確認が必要です。
- [SQL変更項目ガイド](https://dev.mysql.com/doc/refman/8.0/en/upgrading-from-previous-series.html#upgrade-sql-changes)
- [8.0で削除された機能ガイド](https://dev.mysql.com/doc/refman/8.0/en/mysql-nutshell.html#mysql-nutshell-removals)



#### ダミーDBインスタンスを使用したDBエンジンバージョンアップグレード

DBインスタンスの修正ウィンドウでDBエンジンのバージョンを変更しようとする時、ダミーDBインスタンスの使用有無を選択してバージョンアップの過程で高可用性を得ることができます。ダミーDBインスタンスの使用を選択すると、DBバージョンアップグレードのための予備マスターが生成されます。

> [注意]
> ダミーDBインスタンスの場合、アップグレード過程で一時的な予備マスターを生成するため、このオプションは高可用性構成でない場合にのみ使用できます。

### 노후 운영체제를 사용하는 경우

2022년 5월 10일 이전에 생성된 DB 인스턴스의 경우 내부 운영체제가 노후되어 DB 버전을 업그레이드하는 경우 DB 인스턴스가 교체됩니다. 교체 과정에서 DB 인스턴스의 식별자 및 내부 IP 주소가 변경됩니다. 알림 그룹의 감시 대상 인스턴스 및 이벤트 구독의 이벤트 소스는 변경된 식별자로 자동으로 교체됩니다. 단일 DB 인스턴스의 경우 DB 버전 변경 시 반드시 더미 DB 인스턴스를 사용해야 합니다. 고가용성 DB 인스턴스의 경우 DB 인스턴스 교체 과정에서 장애 조치를 이용하여 마스터와 예비 마스터의 역할이 변경됩니다. 마스터의 부하가 심할 경우 장애 조치에 실패할 수 있으므로 DB 버전 변경은 부하가 심하지 않은 시간에 수행하는 것을 권장합니다.

> [주의]
> IP ACL 혹은 보안 그룹에서 기존 DB 인스턴스의 내부 IP를 직접 사용하는 경우 주의해야 합니다.

## MySQL用のオプション

### MySQL用のMariaDBサーバー監査プラグインをサポート

- RDS for MySQLでは、MariaDB監査プラグインを使用してMySQL DBインスタンス用の監査プラグインを提供します。

> [注意]
> 一部のMySQLバージョンではサポートしない場合があり、サポートしないバージョンにバージョンアップする場合、該当プラグインを使用できません。

#### サポートバージョン
| MySQLバージョン | サーバー監査プラグインサポートの有無 |
| --- | --- |
| <strong>8.0</strong> ||
| MySQL 8.0.34 |O| 
| MySQL 8.0.33 |O| 
| MySQL 8.0.32 |O| 
| MySQL 8.0.28 |O| 
| MySQL 8.0.23 |O|
| MySQL 8.0.18 |O|
| <strong>5.7</strong> ||
| MySQL 5.7.37 |X|
| MySQL 5.7.33 |O|
| MySQL 5.7.26 |O|
| MySQL 5.7.19 |O|
| MySQL 5.7.15 |X|
| <strong>MySQL 5.6</strong> ||
| MySQL 5.6.33 |O|
