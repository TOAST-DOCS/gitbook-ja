## Network > Transit Hub > コンソール使用ガイド

コンソールでTransit Hubサービスを使用する方法を説明します。

## 管理

**トランジットハブ**設定を管理します。

### トランジットハブの作成

トランジットハブを作成する方法は次のとおりです。

1. **Network > Transit Hub > 管理**に移動します。
2. **トランジットハブ作成**ボタンをクリックすると、作成画面が表示されます。
3. 作成画面でトランジットハブについての情報を入力します。
    * 名前:トランジットハブの名前を入力します。
    * 説明:トランジットハブの説明を記述します。
    * マルチキャストサポート:マルチキャスト通信が必要な場合、チェックします。
    *基本ルーティングテーブル接続:**接続**が作成された時、基本ルーティングテーブルに自動的に接続します。
    *基本ルーティングテーブルの伝播:**接続**と関連付けられたVPCのCIDR設定値を基本ルーティングテーブルに**ルーティングルール**として自動追加します。
> [注意]
> * マルチキャストサポート、基本ルーティングテーブル接続/伝播設定は変更できません。
> * 基本ルーティングテーブル接続、基本ルーティングテーブル伝播のうち1つ以上選択された場合にのみ、基本ルーティングテーブルが作成されます。

### トランジットハブの変更

トランジットハブを変更する方法は次のとおりです。名前、説明のみ変更できます。

1. **Network > Transit Hub > 管理**に移動します。
2. 画面のリストから変更するトランジットハブを選択します。
3. **トランジットハブ変更**ボタンをクリックすると、変更画面が表示されます。
4. 変更画面で必要な項目を変更します。

### トランジットハブの削除

トランジットハブを削除する方法は次のとおりです。

1. **Network > Transit Hub > 管理**に移動します。
2. 画面のリストから削除するトランジットハブを選択します。
3.**トランジットハブ削除**ボタンをクリックして削除します。

### 他のプロジェクトに共有

トランジットハブを他のプロジェクトに共有します。他のプロジェクトでは共有された**トランジットハブ**に**接続**を作成できます。<br>
トランジットハブを共有する方法は次のとおりです。

1. **Network > Transit Hub > 管理**に移動します。
2. 画面のリストから共有するトランジットハブを選択します。
3. **他のプロジェクトに共有**ボタンをクリックした後、共有画面で共有先の**テナントID**を入力します。
> [参考]他のプロジェクト**テナントID**確認方法 <br>
> 他のプロジェクトにアクセス権限がない場合、当該プロジェクトの管理者からテナントIDを教えてもらう必要があります。
> 1. プロジェクトのコンソール画面に接続します。
> 2. **Network > VPC > 管理**に移動します。
> 3. 画面リストに表示されるVPCの中から1つを選択します。
> 4. **基本情報 > テナントID**に表記されたID値をコピーします。

## 接続

トランジットハブと他のリソースの関係を定義する**接続**を管理します。

### 接続作成

**接続**を作成する方法は次のとおりです。

1. **Network > Transit Hub > 接続**に移動します。
2. **接続作成**ボタンをクリックすると作成画面が表示されます。
3. 作成画面で**接続**についての情報を入力します。
    *名前:**接続**の名前を入力します。
    *説明:**接続**の説明を記述します。
    * トランジットハブタイプ:同じプロジェクトで作成した**一般トランジットハブ**、他のプロジェクトから共有された**共有されたトランジットハブ**の中から選択します。
    *トランジットハブ:**接続**が作成される**トランジットハブ**を選択します。
    * リソースタイプ:リソースタイプを選択します。
    > [参考]現在リソースタイプはVPCのみ選択可能です。
    *リソース:**接続**と関連性を持つリソースを選択します。
    > [参考]リソースタイプがVPCのみ選択可能なため、自動的にVPCリストのみ出力されます。
    *サブネット:**接続**の**ネットワークインターフェイス**が作成されるサブネットを選択します。

### 接続変更

**接続**を変更する方法は次のとおりです。名前、説明のみ変更できます。

1. **Network > Transit Hub > 接続**に移動します。
2. 画面のリストから変更する**接続**を選択します。
3.**接続変更**ボタンをクリックすると、変更画面が表示されます。
4. 変更画面で必要な項目を変更します。

### 接続削除

**接続**を削除する方法は次のとおりです。

1. **Network > Transit Hub > 接続**に移動します。
2. 画面のリストから削除する**接続**を選択します。
3.**接続削除**ボタンをクリックして削除します。

## ルーティングテーブル

トランジットハブの**ルーティングテーブル**設定を管理します。

### ルーティングテーブルの作成

**ルーティングテーブル**を作成する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル**に移動します。
2. **ルーティングテーブル作成**ボタンをクリックすると、作成画面が表示されます。
3. 作成画面でルーティングテーブルについての情報を入力します。
    * 名前:ルーティングテーブルの名前を入力します。
    * 説明:ルーティングテーブルの説明を記述します。
    *トランジットハブ:ルーティングテーブルを作成する**トランジットハブ**を選択します。

### ルーティングテーブル変更

**ルーティングテーブル**を変更する方法は次のとおりです。名前、説明のみ変更できます。

1. **Network > Transit Hub > ルーティングテーブル**に移動します。
2. 画面のリストから変更する**ルーティングテーブル**を選択します。
3. **ルーティングテーブル変更**ボタンをクリックすると、変更画面が表示されます。
4. 変更画面で必要な項目を変更します。

### ルーティングテーブルの削除

**ルーティングテーブル**を削除する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル**に移動します。
2. 画面のリストから削除する**ルーティングテーブル**を選択します。
3. **ルーティングテーブル削除**ボタンをクリックして削除します。

### ルーティングテーブルの管理

選択した**ルーティングテーブル**の基本情報を確認し、ルーティングに関連するパケット処理ルールおよび設定を管理します。

#### 基本情報

選択したルーティングテーブルの基本情報を確認できます。

#### ルーティング接続

**ルーティングテーブル**がパケットを受信するための**接続**との関係を定義する**ルーティング接続**を管理します。

##### ルーティング接続の作成

**ルーティング接続**を作成する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティング接続**に移動します。
2. **ルーティング接続作成**ボタンをクリックすると作成画面が表示されます。
3. 作成画面で**ルーティング接続**についての情報を入力します。
    *接続:**ルーティングテーブル**がパケットを受信するための**接続**を選択します。
    > [参考]トランジットハブで1つの**接続**は選択された1つの**ルーティングテーブル**で1つの**ルーティング接続**のみ作成できます。

##### ルーティング接続削除

**ルーティング接続**を削除する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティング接続**に移動します。
2. 画面のリストから削除する**ルーティング接続**を選択します。
3.**ルーティング接続の削除**ボタンをクリックして削除します。
   
#### ルーティングの伝播

**ルーティングテーブル**でパケットの送信ポリシーを管理する**ルーティングルール**を自動的に作成できます。**ルーティングルール**を自動作成するための**接続**との関係を定義する**ルーティング伝播**を管理します。
> [注意]
> *伝播されるCIDRと同じ帯域の**ルーティングルール**がすでに存在する場合**ルーティング伝播**による**ルーティングルール**が自動的に登録されません。
>    *自動**ルーティングルール**登録に失敗した**ルーティング伝播**は状態がERRORに変更されます。 CIDRを確認し、**ルーティング伝播**を再作成するか、**ルーティングルール**手動設定を使用する方法などの適切な措置が必要です。
> *同じネットワーク帯域(CIDR)を持つ2つ以上の**接続**に対して**ルーティング伝播**を追加する場合も上記と同様に、最初に作成された**ルーティング伝播**のみ**ルーティングルール**が自動的に登録されます。

##### ルーティング伝播の作成

**ルーティング伝播**を作成する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティング伝播**に移動します。
2.**ルーティング伝播作成**ボタンをクリックすると作成画面が表示されます。
3. 作成画面で**ルーティング伝播**に関する情報を入力します。
    *接続:**ルーティングテーブル**がパケットを送信するためのルーティングルールを自動的に作成する**接続**を選択します。
    > [参考]トランジットハブで1つの**接続**は**ルーティングテーブル**ごとに**ルーティング伝播**を1つまで作成できます。

##### ルーティング伝播の削除

**ルーティング伝播**を削除する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティング伝播**に移動します。
2. 画面のリストから削除する**ルーティング伝播**を選択します。
3.**ルーティング伝播の削除**ボタンをクリックして削除します。
> [注意]**ルーティング伝播**を削除すると、自動的に追加された**ルーティングルール**も一緒に削除されます。

#### ルーティングルール

**ルーティングテーブル**でパケットの送信ルールを処理する**ルーティングルール**を管理できます。
> [注意]伝播されるCIDRと同じ帯域の**ルーティングルール**がすでに存在する場合、**ルーティングルール**を追加できません。

##### ルーティングルールの作成

**ルーティングルール**を作成する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティングルール**に移動します。
2. **ルーティングルールの作成**ボタンをクリックすると作成画面が表示されます。
3. 作成画面で**ルーティングルール**に対する情報を入力します。
    * 対象CIDR:ルーティングポリシーのための宛先ネットワーク帯域を入力します。
    > [参考]ルーティングテーブルで**ルーティングルール**の優先順位は**ルーティングルール**に設定されたCIDRのLongest Prefix Matching結果によって決定されます。
    * 接続: **ルーティングテーブル**でパケット送信のための**接続**を選択します。

##### ルーティングルールの削除

**ルーティングルール**を削除する方法は次のとおりです。

1. **Network > Transit Hub > ルーティングテーブル > ルーティングルール**に移動します。
2. 画面のリストから削除する**ルーティングルール**を選択します。
3. **ルーティングルールの削除**ボタンをクリックして削除します。

## マルチキャスト

トランジットハブの**マルチキャスト**設定を管理します。
> [注意]**トランジットハブ**で**マルチキャストサポート**が選択されていない場合、**マルチキャストドメイン**作成ができず、マルチキャスト関連機能はすべて使用できません。

### マルチキャストドメインの作成

**マルチキャストドメイン**を作成する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト**に移動します。
2. **マルチキャストドメインの作成**ボタンをクリックすると、作成画面が表示されます。
3. 作成画面でマルチキャストドメインについての情報を入力します。
    * 名前:マルチキャストドメインの名前を入力します。
    * 説明:マルチキャストドメインの説明を記述します。
    * トランジットハブ:マルチキャストドメインを作成する**トランジットハブ**を選択します。

### マルチキャストドメインの変更

**マルチキャストドメイン**を変更する方法は次のとおりです。名前、説明のみ変更できます。

1. **Network > Transit Hub > マルチキャスト**に移動します。
2. 画面のリストから変更する**マルチキャストドメイン**を選択します。
3. **マルチキャストドメインの変更**ボタンをクリックすると、変更画面が表示されます。
4. 変更画面で必要な項目を変更します。

### マルチキャストドメインの削除

**マルチキャストドメイン**を削除する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト**に移動します。
2. 画面のリストから削除する**マルチキャストドメイン**を選択します。
3. **マルチキャストドメインの削除**ボタンをクリックして削除します。

### マルチキャスト管理

選択した**マルチキャストドメイン**の基本情報を確認し、マルチキャストと関連したパケット処理ポリシーと設定を管理します。

#### 基本情報

選択したマルチキャストドメインの基本情報を確認できます。

#### マルチキャスト接続

VPCタイプの**接続**が持つサブネットを**マルチキャストドメイン**のマルチキャストネットワークに参加させるための**マルチキャスト接続**を管理します。
> [参考]
> * VPCタイプの**接続**のみ**マルチキャスト接続**で使用できます。
> * 他のプロジェクトに共有したトランジットハブによって他のプロジェクトで作られた**接続**は**マルチキャスト接続**で使用できません。
> * 1つのサブネットは**NHN Cloud**全体で1つの**マルチキャスト接続**でのみ使用可能です。つまり、1つの**サブネット**は1つの**マルチキャストドメイン**とのみ接続が可能です。

##### マルチキャスト接続の作成

**マルチキャスト接続**を作成する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト > マルチキャスト接続**に移動します。
2. **マルチキャスト接続作成**ボタンをクリックすると、作成画面が表示されます。
3. 作成画面で**マルチキャスト接続**に関する情報を入力します。
   *接続:**マルチキャストドメイン**のマルチキャストネットワークに参加するための**接続**を選択します。

##### マルチキャスト接続の削除

**マルチキャスト接続**を削除する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト > マルチキャスト接続**に移動します。
2. 画面のリストから削除する**マルチキャスト接続**を選択します。
3.**マルチキャスト接続の削除**ボタンをクリックして削除します。

#### マルチキャストグループ

**マルチキャストドメイン**で提供するマルチキャスト通信に参加する**ネットワークインターフェイス**を**マルチキャストグループ**として管理します。 *マルチキャストグループ**の設定により、同じ**グループIPアドレス**を持つ**ネットワークインターフェイス**は相互にマルチキャスト通信を行います。
> [参考] VM Instanceの**ネットワークインターフェイス**のみマルチキャストグループに追加できます。

##### マルチキャストグループの作成

**マルチキャストグループ**を作成する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト**に移動します。
2. **マルチキャストグループ作成**ボタンをクリックすると作成画面が表示されます。
3. 作成画面でマルチキャストドメインについての情報を入力します。
    *マルチキャスト接続:**マルチキャスト接続**を選択します。
    *ネットワークインターフェイス:**ネットワークインターフェイス**を選択します。
    * グループIPアドレス:マルチキャストIPアドレスを入力します。
    > [参考]
    > * 224.0.0.0/4の範囲で入力される必要があります。
    > * 221.0.0.1は入力できません。 
    * タイプ:メンバー、ソースから選択します。
        * メンバー<br>
          宛先がグループIPアドレスであるマルチキャストパケットを受信します。<br>
          同じグループでメンバーに指定された**ネットワークインターフェイス**はソースに指定できません。
        * ソース<br>
          宛先がグループIPアドレスであるマルチキャストパケットを送信します。同じ**グループIPアドレス**ごとに1つの**ネットワークインターフェイス**のみソースに指定が可能です。<br>
          同じグループでソースとして指定された**ネットワークインターフェイス**はメンバーに指定できません。

##### マルチキャストグループの削除

**マルチキャストグループ**を削除する方法は次のとおりです。

1. **Network > Transit Hub > マルチキャスト > マルチキャストグループ**に移動します。
2. 画面のリストから削除する**マルチキャストグループ**を選択します。
3. **マルチキャストグループの削除**ボタンをクリックして削除します。

## 共有されたトランジットハブ

他のプロジェクトが所有するトランジットハブを共有された場合、**共有されたトランジットハブ**のリストを確認できます。
> [参考]リストと選択した項目の情報確認のみ可能で、設定できる部分はありません。
